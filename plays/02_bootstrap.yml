---

- hosts: localhost
  become: true

  pre_tasks:

    - include: ssh_key.yml

  roles:
    - jtyr.environment
    - tersmitten.limits    
    - willshersystems.sshd
    - franklinkim.vim
    - groks.repo-google

  post_tasks:

    - name: install software
      package:
        name: "{{ item }}"
        state: latest
      with_items:
        - tmux
        - corkscrew
        - krb5-workstation
        - google-chrome-stable
        - deadbeef
        - guake
        - skype
        - vlc
        - sublime_text
        - liberation-fonts
        - torbrowser-launcher
        - ncdu
        - vagrant
        - strace
      tags: packages

    - name: add current user to vboxusers group
      user:
        name="{{ lookup('env','USER') }}"
        groups=vboxusers
        append=yes
