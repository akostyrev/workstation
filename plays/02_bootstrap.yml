---

- hosts: localhost
  become: true

  pre_tasks:

    - include: ssh_key.yml

  roles:
    - jtyr.environment
    - tersmitten.limits    
    - willshersystems.sshd
    - franklinkim.vim
    - groks.repo-google

  post_tasks:

    - name: install software
      package:
        name: "{{ item }}"
        state: latest
      with_items:
        - tmux
        - corkscrew
        - krb5-workstation
        - google-chrome-stable
        - deadbeef
        - guake
        - skype
        - vlc
        - sublime_text
        - liberation-fonts
        - torbrowser-launcher
        - ncdu
        - vagrant
        - strace
        - java-1.8.0-oracle
        - java-1.8.0-oracle-headless
        - java-1.8.0-oracle-plugin
        - ipmitool
      tags: packages

#TODO
# sudo ln -sf /usr/lib/jvm/java-1.8.0-oracle-1.8.0.92.x86_64/jre/lib/amd64/libnpjp2.so /usr/lib64/mozilla/plugins/

    - name: add current user to vboxusers group
      user:
        name="{{ lookup('env','USER') }}"
        groups=vboxusers
        append=yes
